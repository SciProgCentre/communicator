
Примитивные типы (инты, даблы и т.д.) кодируются средствами kotlinx-io

Для строк первые 4 байта занимает длина строки (кодируется так же как и инт), затем идет сама строка в UTF-8

Для списков первые 4 байта занимает длина списка, затем элементы списка кодируются один за другим без разделителей

Пары элементов кодируются без разделителей

Map кодируется как список пар

Композитный объект кодируется без разделителей и без длины, просто как конкатенация закодированных свойств

Пользовательский объект кодируется кастомным кодером как длина получившегося байт-массива (4 байта) и затем сам байт-массив